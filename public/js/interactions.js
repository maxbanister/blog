(()=>{function w(n){let e=0;for(let s of n)e=(e<<5)-e+s.charCodeAt(0),e|=0;let m=e>>0&255,r=e>>8&255,a=e>>16&255;return"rgb("+m+","+r+","+a+",0.5)"}async function u(n){let e=document.getElementById(n),m=e.getElementsByTagName("label")[0],r=document.querySelector("#"+n+" + .expanded"),a=await fetch(window.location.pathname+n);if(!a.ok){console.log(a.statusText);return}let s=await a.json();if(s.length==0)return;e.style.display="flex",r.style.display="flex";let g=n.charAt(0).toUpperCase()+n.slice(1);m.firstChild.textContent=g+" ("+s.length+")",previewImages=e.getElementsByClassName("preview_images")[0];for(let[h,c]of s.entries()){let f=c.actor.id,C=new URL(c.actor.id).hostname,o=c.actor.preferredUsername,p="@"+o+"@"+C,b="/image_proxy/"+encodeURIComponent(c.actor.icon)+"/"+encodeURIComponent(c.actor.id),i=document.createElement("a");i.href=f,i.title=p;let t=document.createElement("img");t.setAttribute("src",b),t.setAttribute("alt",o[0]),t.setAttribute("width","32"),t.setAttribute("height","32");let y=o[0].charCodeAt(0),A=o[1].charCodeAt(0),E=o[2].charCodeAt(0);t.style.backgroundColor=w(p),i.appendChild(t),h<=3&&previewImages.appendChild(i),h==3&&previewImages.appendChild(document.createTextNode("\xA0\u2026"));let l=document.createElement("a"),d=document.createElement("span");t=t.cloneNode(),l.href=f,l.title=p,d.appendChild(t),d.append(o),d.style.display="inline-block",l.appendChild(d),r.appendChild(l)}}async function x(){return Promise.all[u("likes"),u("shares")]}x();})();

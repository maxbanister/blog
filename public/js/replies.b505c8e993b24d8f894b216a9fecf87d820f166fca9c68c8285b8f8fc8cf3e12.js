(()=>{async function S(){let e=await fetch(window.location.pathname+"replies");if(!e.ok){console.log(e.statusText);return}let t=await e.json();console.log(t),l(document.getElementById("replies"),t.items);let o={name:"max",host:"congress.gov",picURL:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fih1.redbubble.net%2Fimage.186232319.8599%2Fsticker%2C375x360.u1.png&f=1&nofb=1&ipt=78c48edebb516b832dc4bb4c3cf1bf8ba11f110e1c8718de68dbdbb829e4f151",userURL:"https://maxbanister.com",opURL:"https://maxbanister.com/post",content:"Hello World"}}function l(e,t){if(t)for(item of t){let o=C(e,{name:item.actor.name,shortName:item.actor.preferredUsername,host:new URL(item.actor.id).hostname,picURL:item.actor.icon,userURL:item.actor.id,date:item.published,editDate:item.updated,opURL:item.id,content:item.content});l(o,item.replies.items)}}function C(e,t){let{name:o,shortName:s,host:m,picURL:p,userURL:d,date:u,editDate:r,opURL:f,content:h}=t,i={dateStyle:"long",timeStyle:"short"},a=new Intl.DateTimeFormat(void 0,i).format(new Date(u));if(r){let E=new Intl.DateTimeFormat(void 0,i).format(new Date(r));a+=" (Edited: "+E+")"}let n=document.getElementById("reply-template").content.cloneNode(!0),c=n.firstElementChild,[y,b]=n.querySelectorAll(".reply-profile-info a span");y.textContent="@"+s,b.textContent="@"+m;let R=c.getElementsByClassName("reply-contents")[0];R.innerHTML=h;let g=n.querySelector(".reply-top > img");g.src=p;let L=n.querySelector(".reply-profile-info > a");L.href=d;let[U,w]=n.querySelectorAll(".reply-profile-info > span");U.textContent=o,w.textContent=a;let x=n.querySelector(".reply-op-button > a");return x.href=f,e.appendChild(n),c}async function D(){return S()}D();})();

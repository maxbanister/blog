(()=>{async function S(){let o=document.querySelector("#social-links > a");o.href="https://mastodon.social/authorize_interaction?uri="+window.location.href;let e=await fetch(window.location.pathname+"replies");if(!e.ok){console.log(e.statusText);return}let n=await e.json();console.log(n),l(document.getElementById("replies"),n.items);let i={name:"max",host:"congress.gov",picURL:"https://external-content.duckduckgo.com/iu/?u=http%3A%2F%2Fih1.redbubble.net%2Fimage.186232319.8599%2Fsticker%2C375x360.u1.png&f=1&nofb=1&ipt=78c48edebb516b832dc4bb4c3cf1bf8ba11f110e1c8718de68dbdbb829e4f151",userURL:"https://maxbanister.com",opURL:"https://maxbanister.com/post",content:"Hello World"}}function l(o,e){if(e)for(item of e){let n=A(o,{name:item.actor.name,shortName:item.actor.preferredUsername,host:new URL(item.actor.id).hostname,picURL:item.actor.icon,userURL:item.actor.id,date:item.published,editDate:item.updated,opURL:item.id,content:item.content});l(n,item.replies.items)}}function A(o,e){let{name:n,shortName:i,host:m,picURL:d,userURL:p,date:u,editDate:r,opURL:f,content:h}=e,a={dateStyle:"long",timeStyle:"short"},c=new Intl.DateTimeFormat(void 0,a).format(new Date(u));if(r){let E=new Intl.DateTimeFormat(void 0,a).format(new Date(r));c+=" (Edited: "+E+")"}let t=document.getElementById("reply-template").content.cloneNode(!0),s=t.firstElementChild,[y,b]=t.querySelectorAll(".reply-profile-info a span");y.textContent="@"+i,b.textContent="@"+m;let R=s.getElementsByClassName("reply-contents")[0];R.innerHTML=h;let g=t.querySelector(".reply-top > img");g.src=d;let w=t.querySelector(".reply-profile-info > a");w.href=p;let[L,U]=t.querySelectorAll(".reply-profile-info > span");L.textContent=n,U.textContent=c;let x=t.querySelector(".reply-op-button > a");return x.href=f,o.appendChild(t),s}async function C(){return S()}C();})();

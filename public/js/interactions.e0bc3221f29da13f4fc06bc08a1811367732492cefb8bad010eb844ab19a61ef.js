(()=>{async function u(t){let l=document.getElementById(t),f=l.getElementsByTagName("label")[0],d=document.querySelector("#"+t+" + .expanded"),o=await fetch(window.location.pathname+t);if(!o.ok){console.log(o.statusText);return}let r=await o.json();if(r.length==0)return;l.style.display="flex",d.style.display="flex";let g=t.charAt(0).toUpperCase()+t.slice(1);f.firstChild.textContent=g+" ("+r.length+")",previewImages=l.getElementsByClassName("preview_images")[0];for(let[m,n]of r.entries()){let p=t=="likes"?n.id:n.actor.id,w=new URL(n.actor.id).hostname,c=n.actor.preferredUsername,h="@"+c+"@"+w,C=n.actor.icon,a=document.createElement("a");a.href=p,a.title=h;let e=document.createElement("img");e.setAttribute("src",C),e.setAttribute("alt",c),e.setAttribute("width","32"),e.setAttribute("height","32"),a.appendChild(e),m<=3&&previewImages.appendChild(a),m==3&&previewImages.appendChild(document.createTextNode("\xA0\u2026"));let s=document.createElement("a"),i=document.createElement("span");e=e.cloneNode(),s.href=p,s.title=h,i.appendChild(e),i.append(c),i.style.display="inline-block",s.appendChild(i),d.appendChild(s)}}async function E(){return Promise.all[u("likes"),u("shares")]}E();})();
